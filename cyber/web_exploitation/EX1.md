```
summary: Make an a database over an apache server with php as an api to manage it.
```
1) Installed php, apache, mysql. Where apache is the webserver, php is the API language, php-mysql to communicate php with mysql, MySql is the database engine.
   `sudo apt update`
   `sudo apt install apache`
   `sudo apt install php libapache2-mod-php php-mysql`
   `sudo apt install mysql-server`
2) The project will be in /var/www/html/ as it is a web project and apache2 is installed there.
3) I wrote 2 php files. One for retrieving user and one for adding used.
   Adding:
   ```php
   <?php

session_start();
$servername = "localhost";
$dbUser = "lempo";
$dbPassword = "password";
$dbName = "user_info";

$conn = new mysqli($servername, $dbUser, $dbPassword, $dbName);

if($conn->connect_error)
{
	die("Connection failed: " . $conn->connect_error);
}

$user_input = json_decode(file_get_contents('php://input'), true);
if(!$user_input)
{
	$user_input = $_POST;
}

if (empty($user_input['User']) || empty($user_input['Password']))
{
	echo("Missing params");
	exit;
}

$user = $user_input['User'];
$password = $user_input['Password'];

$query_db = $conn->prepare("SELECT PhoneNUmber, Password FROM Users WHERE `User` = ? LIMIT 1");
if(!$query_db)
{
	echo("Query data from db failed");
}

$query_db->bind_param("s", $user);
$query_db->execute();
$query_db->store_result();

if($query_db->num_rows !== 1)
{
	echo("Wrong credentials");
	exit;
}

$query_db->bind_result($phoneNumber,$hashedPassword);
$query_db->fetch();

if(password_verify($password, $hashedPassword))
{
	$_SESSION['User'] = $user;
	$_SESSION['PhoneNumber'] = $phoneNumber;
	setcookie("User", $user, time()+(86400 * 30), "/");

	header('Content-Type: application/json');
	echo json_encode(["phoneNumber"=>$phoneNumber]);
}
else
{
	echo("Invalid Credentials");
}

$query_db->close();
$conn->close();
?>
``` 

Retrieving user:
```php
<?php

session_start();
$servername = "localhost";
$dbUser = "lempo";
$dbPassword = "password";
$dbName = "user_info";

$conn = new mysqli($servername, $dbUser, $dbPassword, $dbName);

if($conn->connect_error)
{
	die("Connection failed: " . $conn->connect_error);
}

$user_input = json_decode(file_get_contents('php://input'), true);
if(!$user_input)
{
	$user_input = $_POST;
}

if (empty($user_input['User']) || empty($user_input['Password']) || empty($user_input['PhoneNumber']))
{
	echo("Missing params");
	exit;
}

$user = $user_input['User'];
$password = $user_input['Password'];
$phoneNumber = $user_input['PhoneNumber'];

$hashedPassword = password_hash($password, PASSWORD_DEFAULT);

$query_db = $conn->prepare("INSERT INTO Users (`User`, Password, PhoneNumber) VALUES (?, ?, ?)");
if(!$query_db)
{
	echo("Query data from db failed");
}

$query_db->bind_param("sss", $user, $hashedPassword, $phoneNumber);

if($query_db->execute())
{
	echo("Successful insertion");
}
else
{
	echo("Failed insertion");
}

$query_db->close();
$conn->close();
?>
```

4) I used postman to send POST request for adding and retrieving a user via json raw.
   Add:
`{

"User":"Ben",

"Password":"Banana",

"PhoneNumber":"1234567890"

}`
Ret

